/******************************************************************************
   Author: Joaquín Béjar García
   Email: jb@taunais.com
   Date: 26/9/24
******************************************************************************/
use optionstratlib::model::chain::OptionChain;
use optionstratlib::model::types::PositiveF64;
use optionstratlib::pos;
use optionstratlib::utils::logger::setup_logger;
use tracing::info;

fn main() {
    setup_logger();
    let mut chain = OptionChain::new("SP500", pos!(5781.88), "18 oct 2024".to_string());

    chain.add_option(
        pos!(5520.0),
        pos!(274.26),
        pos!(276.06),
        pos!(13.22),
        pos!(14.90),
        pos!(16.31),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5525.0),
        pos!(269.62),
        pos!(271.42),
        pos!(13.54),
        pos!(15.27),
        pos!(16.205),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5530.0),
        pos!(265.00),
        pos!(266.80),
        pos!(13.88),
        pos!(15.65),
        pos!(16.1),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5540.0),
        pos!(255.78),
        pos!(257.58),
        pos!(14.62),
        pos!(16.42),
        pos!(15.89),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5550.0),
        pos!(246.61),
        pos!(248.41),
        pos!(15.42),
        pos!(17.22),
        pos!(15.68),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5560.0),
        pos!(237.49),
        pos!(239.29),
        pos!(15.96),
        pos!(18.07),
        pos!(15.47),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5570.0),
        pos!(228.42),
        pos!(230.22),
        pos!(17.18),
        pos!(18.98),
        pos!(15.26),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5575.0),
        pos!(223.91),
        pos!(225.71),
        pos!(17.65),
        pos!(19.45),
        pos!(15.155),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5580.0),
        pos!(219.42),
        pos!(221.22),
        pos!(18.14),
        pos!(19.94),
        pos!(15.05),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5590.0),
        pos!(210.48),
        pos!(212.28),
        pos!(18.07),
        pos!(20.23),
        pos!(14.84),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5600.0),
        pos!(201.60),
        pos!(203.40),
        pos!(19.17),
        pos!(20.97),
        pos!(14.63),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5610.0),
        pos!(192.80),
        pos!(194.60),
        pos!(21.43),
        pos!(23.23),
        pos!(14.42),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5620.0),
        pos!(184.08),
        pos!(185.88),
        pos!(22.68),
        pos!(24.48),
        pos!(14.21),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5625.0),
        pos!(179.75),
        pos!(181.55),
        pos!(23.33),
        pos!(25.13),
        pos!(14.105),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5630.0),
        pos!(175.44),
        pos!(177.24),
        pos!(24.01),
        pos!(25.81),
        pos!(14.0),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5640.0),
        pos!(167.02),
        pos!(168.82),
        pos!(25.56),
        pos!(27.36),
        pos!(13.82),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5650.0),
        pos!(158.71),
        pos!(160.51),
        pos!(27.22),
        pos!(29.02),
        pos!(13.64),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5660.0),
        pos!(150.51),
        pos!(152.31),
        pos!(28.99),
        pos!(30.79),
        pos!(13.46),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5670.0),
        pos!(142.43),
        pos!(144.23),
        pos!(30.89),
        pos!(32.69),
        pos!(13.28),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5675.0),
        pos!(138.44),
        pos!(140.24),
        pos!(31.88),
        pos!(33.68),
        pos!(13.19),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5680.0),
        pos!(134.48),
        pos!(136.28),
        pos!(32.91),
        pos!(34.71),
        pos!(13.1),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5690.0),
        pos!(126.67),
        pos!(128.47),
        pos!(35.07),
        pos!(36.87),
        pos!(12.92),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5700.0),
        pos!(119.01),
        pos!(120.81),
        pos!(37.37),
        pos!(39.17),
        pos!(12.74),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5710.0),
        pos!(111.50),
        pos!(113.30),
        pos!(39.83),
        pos!(41.63),
        pos!(12.56),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5720.0),
        pos!(104.16),
        pos!(105.96),
        pos!(42.46),
        pos!(44.26),
        pos!(12.38),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5730.0),
        pos!(96.99),
        pos!(98.79),
        pos!(45.27),
        pos!(47.07),
        pos!(12.2),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5740.0),
        pos!(90.02),
        pos!(91.82),
        pos!(48.26),
        pos!(50.06),
        pos!(12.02),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5750.0),
        pos!(83.24),
        pos!(85.04),
        pos!(51.45),
        pos!(53.25),
        pos!(11.84),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5760.0),
        pos!(76.67),
        pos!(78.47),
        pos!(54.85),
        pos!(56.65),
        pos!(11.66),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5770.0),
        pos!(70.32),
        pos!(72.12),
        pos!(58.47),
        pos!(60.27),
        pos!(11.48),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5780.0),
        pos!(64.20),
        pos!(66.00),
        pos!(62.32),
        pos!(64.12),
        pos!(11.3),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5790.0),
        pos!(58.50),
        pos!(60.30),
        pos!(66.59),
        pos!(68.39),
        pos!(11.15),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5800.0),
        pos!(53.04),
        pos!(54.84),
        pos!(71.11),
        pos!(72.91),
        pos!(11.0),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5810.0),
        pos!(47.85),
        pos!(49.65),
        pos!(75.89),
        pos!(77.69),
        pos!(10.85),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5820.0),
        pos!(42.93),
        pos!(44.73),
        pos!(80.94),
        pos!(82.74),
        pos!(10.7),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5830.0),
        pos!(38.29),
        pos!(40.09),
        pos!(86.27),
        pos!(88.07),
        pos!(10.55),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5840.0),
        pos!(33.93),
        pos!(35.73),
        pos!(91.87),
        pos!(93.67),
        pos!(10.4),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5850.0),
        pos!(29.85),
        pos!(31.65),
        pos!(97.77),
        pos!(99.57),
        pos!(10.25),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5900.0),
        pos!(16.05),
        pos!(17.85),
        pos!(133.82),
        pos!(135.62),
        pos!(10.058),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(5950.0),
        pos!(8.05),
        pos!(9.08),
        pos!(175.28),
        pos!(177.08),
        pos!(9.928),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(6000.0),
        pos!(3.38),
        pos!(4.38),
        pos!(220.45),
        pos!(222.25),
        pos!(9.798),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(6050.0),
        pos!(1.06),
        pos!(2.06),
        pos!(267.98),
        pos!(269.78),
        pos!(9.668),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(6100.0),
        pos!(0.05),
        pos!(1.05),
        pos!(316.82),
        pos!(318.62),
        pos!(9.538),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(6150.0),
        pos!(0.00),
        pos!(1.00),
        pos!(366.30),
        pos!(368.10),
        pos!(9.46),
        0.5,
        None,
        None,
    );
    chain.add_option(
        pos!(6200.0),
        pos!(0.00),
        pos!(1.00),
        pos!(416.03),
        pos!(417.83),
        pos!(9.46),
        0.5,
        None,
        None,
    );

    info!("\n{}", chain);

    chain.save_to_csv("./examples/Chains").unwrap();
    chain.save_to_json("./examples/Chains").unwrap();
    let _ = OptionChain::load_from_csv("./examples/Chains/SP500-18-oct-2024-5781.88.csv").unwrap();
    let _ =
        OptionChain::load_from_json("./examples/Chains/SP500-18-oct-2024-5781.88.json").unwrap();
}
